# 雇用契約検証ガイド

## 概要

このガイドでは、Legalis-JPの労働法基盤を活用した雇用契約の自動検証システムについて説明します。本システムは、最低賃金、労働時間、その他の法定要件への準拠を確認し、違法な契約生成を防ぎます。

**コア哲学**: 「労働三法を充実させた上で、だからこそこのようなテンプレート処理が成り立つんだ」

## アーキテクチャ

```
┌─────────────────────────────────────────────────────────────┐
│                     契約書生成                                │
│                   (テンプレートレンダリング)                    │
└───────────────────────┬─────────────────────────────────────┘
                        │
                        ▼
┌─────────────────────────────────────────────────────────────┐
│              雇用契約検証                                      │
│                (employment_helper.rs)                        │
└───────────────────────┬─────────────────────────────────────┘
                        │
                        ▼
┌─────────────────────────────────────────────────────────────┐
│                労働法基盤                                      │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ EmploymentContractBuilder (builder.rs)              │   │
│  │ • Article709形式のfluent API                         │   │
│  │ • 型安全なフィールド検証                               │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                              │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 最低賃金検証 (minimum_wage.rs)                        │   │
│  │ • 47都道府県データ (2024年度)                         │   │
│  │ • 地域別適用                                          │   │
│  │ • 東京都: ¥1,113/時 | 沖縄県: ¥896/時                 │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                              │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 第36条 時間外労働 (types.rs)                          │   │
│  │ • 36協定 (時間外労働協定)                             │   │
│  │ • 標準: 月45時間、年360時間                           │   │
│  │ • 特別条項: 月最大100時間、年6ヶ月まで                 │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                              │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 第18条 無期転換 (conversion.rs)                       │   │
│  │ • 無期転換ルール (5年ルール)                          │   │
│  │ • 有期→無期転換                                       │   │
│  │ • 不利益変更禁止                                      │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                              │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 競業避止義務検証 (non_compete.rs)                     │   │
│  │ • 民法第90条 (公序良俗)                               │   │
│  │ • 合理性判断要素                                      │   │
│  │ • リスクスコア: 低/中/高/致命的                        │   │
│  └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
                        │
                        ▼
┌─────────────────────────────────────────────────────────────┐
│               コンプライアンスレポート                          │
│                (compliance.rs)                               │
│  • 構造化された検証結果                                       │
│  • スコアリングシステム (0-100)                               │
│  • Markdownレポート生成                                       │
└─────────────────────────────────────────────────────────────┘
```

## クイックスタート

### 1. 基本的な雇用契約検証

```rust
use legalis_jp::contract_templates::employment_helper::validate_employment_data;
use legalis_jp::labor_law::Prefecture;

let report = validate_employment_data(
    "山田太郎",           // 従業員名
    "株式会社ABC",       // 雇用主名
    400_000,            // 月給¥400,000
    8,                  // 1日8時間
    5,                  // 週5日
    Prefecture::Tokyo,  // 東京都
)?;

println!("コンプライアンス: {}", if report.is_compliant() {
    "✓ 準拠"
} else {
    "✗ 違反"
});
println!("スコア: {}/100", report.score());
```

### 2. 実施される検証項目

本システムは以下を自動検証します:

1. **契約構造** (労働基準法第15条)
   - 必須フィールドの存在確認
   - 有効な契約種別
   - 適切な日付範囲

2. **最低賃金** (最低賃金法)
   - 地域別最低賃金の適用
   - 月給から時給への換算
   - 47都道府県別のレート適用 (2024年度)

3. **労働時間** (労働基準法第32条)
   - 1日の上限: 8時間
   - 週の上限: 40時間
   - 超過時の警告 (第36条協定が必要)

4. **競業避止条項** (民法第90条)
   - 期間の合理性
   - 地理的範囲
   - 代償措置の有無
   - 禁止活動の範囲

## 法的コンプライアンス詳細

### 最低賃金の適用

**2024年度 地域別最低賃金** (2024年10月時点):

| 都道府県 | 最低賃金 | 備考 |
|---------|---------|------|
| 東京都 | ¥1,113/時 | 最高 |
| 神奈川県 | ¥1,112/時 | |
| 大阪府 | ¥1,064/時 | |
| 埼玉県 | ¥1,028/時 | |
| 愛知県 | ¥1,027/時 | |
| ... | ... | |
| 沖縄県 | ¥896/時 | 最低 |

**検証例**:
```rust
// 月給: ¥170,000
// 労働時間: 月173.3時間 (8時間/日、週5日)
// 時給: ¥170,000 ÷ 173.3 = ¥981/時

// 東京都 (¥1,113/時 最低賃金)
✗ 非準拠 - ¥981 < ¥1,113

// 沖縄県 (¥896/時 最低賃金)
✓ 準拠 - ¥981 > ¥896
```

### 労働時間の検証

**法定労働時間** (労働基準法第32条):
- 1日: 8時間
- 週: 40時間

**超過した場合**:
- 契約自体は有効だが
- ⚠️ 警告が発行される
- 第36条協定 (36協定) の締結が必要
- 労働基準監督署への届出が必要

**例**:
```rust
let report = validate_employment_data(
    "田中一郎",
    "株式会社XYZ",
    450_000,
    9,  // 1日9時間 - 8時間を超過
    6,  // 週6日 - 週5日標準を超過
    Prefecture::Tokyo,
)?;

// 結果:
// ✓ 準拠 (構造的には有効)
// スコア: 90/100 (警告による減点)
// 警告:
//   - 1日の労働時間が法定時間を超過
//   - 週の労働時間が法定時間を超過
//   - 第36条協定の締結が必要
```

### 競業避止義務の検証

**合理性判断要素** (民法第90条 公序良俗):

1. **期間** (期間)
   - 合理的: 6-12ヶ月
   - 疑問: 12-24ヶ月
   - 不合理: 24ヶ月以上

2. **地理的範囲** (地域的範囲)
   - 合理的: 市区町村レベル (例: 東京23区内)
   - 疑問: 地域レベル (例: 関東圏)
   - 不合理: 全国、全世界

3. **代償措置** (代償措置)
   - **必須** 執行可能性の要件
   - 制限期間中の補償
   - 通常: 月次支払い

4. **禁止活動** (禁止業務)
   - 具体的活動: 合理的
   - 広範なカテゴリー: 疑問
   - 「全ての活動」: 不合理

**例 - 合理的な条項**:
```rust
let clause = NonCompeteClause {
    duration_months: 6,                     // ✓ 短期間
    geographic_scope: "東京23区内".to_string(), // ✓ 限定的範囲
    prohibited_activities: vec![
        "同業種での就業".to_string()          // ✓ 具体的
    ],
    consideration_provided: true,           // ✓ 補償あり
    compensation_amount_jpy: Some(600_000), // ✓ 適切な金額
};

let report = validate_non_compete(&clause, "エンジニア")?;
// 結果: ✓ 合理的
```

**例 - 不合理な条項**:
```rust
let clause = NonCompeteClause {
    duration_months: 36,                    // ✗ 3年 - 過度
    geographic_scope: "全世界".to_string(),   // ✗ 全世界 - 不合理
    prohibited_activities: vec![
        "全ての事業活動".to_string()          // ✗ 過度に広範
    ],
    consideration_provided: false,          // ✗ 補償なし
    compensation_amount_jpy: None,
};

let report = validate_non_compete(&clause, "エンジニア")?;
// 結果: ✗ 不合理
// 違反:
//   - 期間が絶対最大値を超過
//   - 全世界的範囲は通常不合理
//   - 過度に広範な禁止事項
//   - 代償措置の提供なし
```

## コンプライアンスレポート

### レポート構造

```rust
pub struct ComplianceReport {
    pub contract_type: String,
    pub validation_date: DateTime<Utc>,
    pub checks_performed: Vec<ComplianceCheck>,
    pub violations: Vec<ComplianceViolation>,
    pub warnings: Vec<ComplianceWarning>,
}
```

### スコアリングシステム

**満点 (100点)**:
- 全チェック合格
- 違反なし
- 警告なし

**減点**:
- **-5点** 警告1件につき (最低60点)
- **-20点** 違反1件につき (最低0点)

**例**:
```
問題なし:          100/100
警告1件:            95/100
警告2件:            90/100
違反1件:            80/100
違反2件:            60/100
違反3件以上:      40-0/100
```

### Markdownレポート生成

```rust
let report = validate_employment_data(...)?;
let markdown = report.to_markdown();

// 出力:
// # 労働法コンプライアンスレポート
//
// **契約種別**: Employment Contract
// **検証日時**: 2026年01月09日 16:30
// **スコア**: 95/100
//
// ## ⚠ 警告 (Warnings)
// 1. **Daily Working Hours**
//    - 1日の労働時間9時間が法定8時間を超過...
//
// ## ✓ 合格チェック (Passed Checks)
// - 最低賃金チェック (最低賃金法 - 東京都)
// - 契約構造 (労働基準法第15条)
```

## 高度な使用方法

### カスタム検証パイプライン

```rust
use legalis_jp::labor_law::EmploymentContractBuilder;
use legalis_jp::contract_templates::compliance::*;

// 契約を構築
let contract = EmploymentContractBuilder::new()
    .with_employee("山田太郎")
    .with_employer("株式会社ABC")
    .with_salary(400_000)
    .with_working_hours(8, 5)
    .with_prefecture(Prefecture::Tokyo)
    .with_employment_type(EmploymentType::IndefiniteTerm)
    .with_start_date(Utc::now())
    .with_job_description("ソフトウェアエンジニア")
    .with_work_location("東京オフィス")
    .build()?;

// カスタムコンプライアンスレポート作成
let mut report = ComplianceReport::new("カスタム雇用契約");

// カスタムチェック追加
report.add_check(ComplianceCheck {
    check_name: "カスタム検証".to_string(),
    legal_reference: "社内規定".to_string(),
    status: CheckStatus::Passed,
    details: "社内要件を満たしています".to_string(),
});

println!("スコア: {}/100", report.score());
```

### 第18条 無期転換 (5年ルール)

```rust
use legalis_jp::labor_law::IndefiniteConversionBuilder;

// 5年以上の有期雇用従業員
let builder = IndefiniteConversionBuilder::from_fixed_term(&fixed_term_contract)?;

// 給与増額を伴う無期転換
let indefinite_contract = builder
    .with_new_salary(420_000)  // ¥20,000昇給
    .with_new_job_description("シニアエンジニア")
    .build()?;

// 結果:
// - employment_type: IndefiniteTerm (無期雇用)
// - end_date: None (終了日なし)
// - base_wage_jpy: 420,000
// - 不利益変更禁止 (給与減額不可)
```

## ベストプラクティス

### 1. 生成前に必ず検証

```rust
// ✓ 良い: 先に検証
let report = validate_employment_data(...)?;
if !report.is_compliant() {
    return Err("契約が労働法に違反しています");
}
// その後、契約を生成...

// ✗ 悪い: 検証なしで生成
// 違法な契約を生成する可能性
```

### 2. 重要な契約には厳格モードを使用

```rust
// 違反がある契約は拒否
if report.violations.len() > 0 {
    return Err("契約は違反ゼロでなければなりません");
}

// 警告は受け入れ (第36条協定が必要な場合)
if report.warnings.len() > 0 {
    log::warn!("契約には第36条協定が必要です");
}
```

### 3. 地域別コンプライアンス

```rust
// 正しい都道府県を必ず指定
let prefecture = match work_location {
    "東京" => Prefecture::Tokyo,
    "大阪" => Prefecture::Osaka,
    _ => return Err("不明な都道府県"),
};

// システムが自動的に地域別最低賃金を適用
```

### 4. 警告の文書化

```rust
if !report.warnings.is_empty() {
    println!("⚠️ 警告検出:");
    for warning in &report.warnings {
        println!("  - {}", warning.description);
    }
    println!("\n必要なアクション:");
    println!("  1. 労働基準監督署に第36条協定を届出");
    println!("  2. 時間外労働の上限を指定 (標準45時間/月)");
    println!("  3. 該当する場合は特別条項を文書化");
}
```

## 法的根拠

### 労働基準法 (労働基準法)
- **第15条**: 雇用契約の必須事項
- **第32条**: 法定労働時間 (1日8時間、週40時間)
- **第34条**: 休憩時間
- **第35条**: 休日 (週休)
- **第36条**: 時間外労働協定 (36協定)
- **第37条**: 時間外労働の割増賃金

### 労働契約法 (労働契約法)
- **第3条**: 信義誠実の原則
- **第16条**: 解雇権の濫用
- **第18条**: 無期転換ルール (5年ルール)
- **第19条**: 契約更新ルール

### 最低賃金法 (最低賃金法)
- 地域別最低賃金の適用
- 毎年更新 (10月)

### 民法 (民法)
- **第90条**: 公序良俗 (競業避止の合理性)

## トラブルシューティング

### 最低賃金違反エラー

```
エラー: 時給¥850が東京都の最低賃金¥1,113を下回っています
```

**解決策**: 月給を増額するか労働時間を削減
```rust
// 選択肢1: 給与増額
base_salary: 200_000 → 250_000

// 選択肢2: 別の都道府県を検討 (勤務地が柔軟な場合)
prefecture: Tokyo → Okinawa
```

### 労働時間超過警告

```
警告: 週50時間が法定40時間を超過しています。
第36条協定が必要です。
```

**解決策**: いずれか
1. 労働時間を法定上限まで削減、または
2. 時間外労働のための第36条協定を届出

### 不合理な競業避止

```
エラー: 期間36ヶ月が絶対最大値24ヶ月を超過しています
```

**解決策**: 期間を合理的範囲 (6-12ヶ月) に削減

## サンプル実行

```bash
cargo run --example employment-contract-validation
```

このサンプルで示される内容:
- ✓ 準拠契約 (東京都)
- ✗ 最低賃金違反
- 地域差 (沖縄県 vs 東京都)
- 労働時間超過 (第36条)
- 競業避止の合理性
- Markdownレポート生成

## まとめ

Legalis-JPの契約検証システムは:

✅ **適用** 最低賃金コンプライアンス (47都道府県)
✅ **検証** 労働時間 (第32条)
✅ **チェック** 競業避止の合理性 (第90条)
✅ **生成** 詳細なコンプライアンスレポート
✅ **採点** 契約の評価 (0-100スケール)
✅ **防止** 違法な契約の生成

**実証された哲学**: テンプレートは包括的な労働法基盤があるからこそ機能する!
