# Z3 SMT Solver Configuration (required for z3-solver feature)
# This file is used by direnv to automatically set environment variables
# Install direnv: brew install direnv
# Then run: direnv allow

# Detect platform and set Z3 paths accordingly
if [[ "$OSTYPE" == "darwin"* ]]; then
  # macOS
  if [[ -d "/opt/homebrew/opt/z3" ]]; then
    # Apple Silicon (M1/M2/M3)
    export Z3_SYS_Z3_HEADER=/opt/homebrew/opt/z3/include/z3.h
    export LIBRARY_PATH=/opt/homebrew/opt/z3/lib:$LIBRARY_PATH
    export DYLD_LIBRARY_PATH=/opt/homebrew/opt/z3/lib:$DYLD_LIBRARY_PATH
  elif [[ -d "/usr/local/opt/z3" ]]; then
    # Intel Mac
    export Z3_SYS_Z3_HEADER=/usr/local/opt/z3/include/z3.h
    export LIBRARY_PATH=/usr/local/opt/z3/lib:$LIBRARY_PATH
    export DYLD_LIBRARY_PATH=/usr/local/opt/z3/lib:$DYLD_LIBRARY_PATH
  fi
elif [[ "$OSTYPE" == "linux-gnu"* ]]; then
  # Linux
  if [[ -f "/usr/include/z3.h" ]]; then
    export Z3_SYS_Z3_HEADER=/usr/include/z3.h
    export LD_LIBRARY_PATH=/usr/lib:$LD_LIBRARY_PATH
  elif [[ -f "/usr/local/include/z3.h" ]]; then
    export Z3_SYS_Z3_HEADER=/usr/local/include/z3.h
    export LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH
  fi
fi
